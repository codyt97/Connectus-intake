<!doctype html>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ConnectUS â€” Quote / Sales Order Intake (Minimal Test)</title>
<style>
  body{font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial;margin:24px}
  input,button{font-size:14px;padding:8px 10px}
  .row{display:flex;gap:8px;align-items:center;margin:10px 0}
  pre{background:#f7fafc;border:1px solid #e2e8f0;padding:10px;border-radius:8px;overflow:auto}
</style>

<h1>API Smoke Test</h1>

<div class="row">
  <input id="q" placeholder="Search customers (min 2 chars)" />
  <button onclick="search()">Search</button>
  <button onclick="health()">Health</button>
</div>

<pre id="out">(results)</pre>

<script>
  async function api(path) {
    const r = await fetch(`/api${path}`);
    if (!r.ok) throw new Error(`${r.status} ${r.statusText}`);
    return r.json();
  }

  async function health(){
    const data = await api('/health');
    document.getElementById('out').textContent = JSON.stringify(data, null, 2);
  }

  async function search(){
    const q = (document.getElementById('q').value || '').trim();
    const data = await api(`/ot/customers/search?q=${encodeURIComponent(q)}`);
    document.getElementById('out').textContent = JSON.stringify(data, null, 2);
  }
</script>
